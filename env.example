# CampusLearn Backend Environment Variables
# Copy this file to backend/.env and fill in your actual values

# =============================================================================
# REQUIRED - Core Application Settings
# =============================================================================

# Node Environment (development, production, test)
NODE_ENV=development

# Server Port
PORT=5001

# =============================================================================
# REQUIRED - Database & Cache Configuration
# =============================================================================

# MongoDB Connection String
# Format: mongodb+srv://username:password@cluster.mongodb.net/database
MONGO_URI=mongodb+srv://username:password@cluster.mongodb.net/campuslearn?retryWrites=true&w=majority&appName=CampusLearn

# Redis Connection String
# Format: redis://username:password@host:port
REDIS_URL=redis://username:password@redis-host:port

# =============================================================================
# REQUIRED - Authentication & Security
# =============================================================================

# JWT Secret Key (generate a strong random string)
# Use: openssl rand -base64 64
JWT_SECRET=your-super-secret-jwt-key-here

# =============================================================================
# REQUIRED - Botpress Integration
# =============================================================================

# Botpress Client ID
BOTPRESS_CLIENT_ID=your-botpress-client-id

# Botpress Bot ID
BOTPRESS_BOT_ID=your-botpress-bot-id

# Botpress Personal Access Token
BOTPRESS_PAT=your-botpress-personal-access-token

# Botpress Webhook URL
BOTPRESS_WEBHOOK_URL=https://webhook.botpress.cloud/your-webhook-id

# Botpress Internal Security (REQUIRED for Botpress integration)
BOTPRESS_INTERNAL_TOKEN=your-secure-internal-token
BOTPRESS_CLAIM_SECRET=your-secure-claim-secret

# =============================================================================
# OPTIONAL - Google Cloud Storage (for file uploads)
# =============================================================================

# GCS Bucket Name
GCS_BUCKET=tutor-student-videos

# Google Cloud Project ID
GCLOUD_PROJECT=your-gcp-project-id
# Alternative: GOOGLE_CLOUD_PROJECT=your-gcp-project-id

# GCS Credentials (choose ONE method):
# Method 1: Inline JSON (recommended for Docker)
GCS_KEYFILE_JSON={"type":"service_account","project_id":"your-project","private_key_id":"...","private_key":"...","client_email":"...","client_id":"...","auth_uri":"https://accounts.google.com/o/oauth2/auth","token_uri":"https://oauth2.googleapis.com/token","auth_provider_x509_cert_url":"https://www.googleapis.com/oauth2/v1/certs","client_x509_cert_url":"..."}

# Method 2: Base64 Encoded JSON
# GCS_KEYFILE_B64=eyJ0eXBlIjoic2VydmljZV9hY2NvdW50IiwiLi4uIn0=

# Method 3: File Path (for local development)
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json

# =============================================================================
# OPTIONAL - Video Processing & CDN
# =============================================================================

# Enable Video Transcoding
ENABLE_VIDEO_TRANSCODING=true

# Video Quality Settings (comma-separated)
VIDEO_QUALITIES=720p,480p,360p

# Video Cache TTL (seconds)
VIDEO_CACHE_TTL_SECONDS=3000

# Video Compression Settings
VIDEO_COMPRESSION_ENABLED=true
# Video streaming settings - no limits for hosted environment
VIDEO_INITIAL_CHUNK_SIZE=0
VIDEO_MAX_CHUNK_SIZE=0

# CDN Configuration
CDN_ENABLED=false
CDN_BASE_URL=https://your-cdn-domain.com
CDN_CACHE_TTL=86400
CDN_PROVIDER=google-cloud

# =============================================================================
# OPTIONAL - Development & Testing
# =============================================================================

# Test User Credentials (for development/testing only)
TEST_USER_EMAIL=test.student@student.belgiumcampus.ac.za
TEST_USER_PASSWORD=password123

# Development URLs
FRONTEND_URL=http://localhost:5173
BACKEND_URL=http://localhost:5001

# CORS Origins (comma-separated)
CORS_ORIGINS=http://localhost:5173,http://localhost:8080,http://localhost:5001

# =============================================================================
# BREVO EMAIL CONFIGURATION
# =============================================================================

# Email Service Provider
EMAIL_PROVIDER=brevo

# Brevo SMTP Server Configuration
SMTP_HOST=smtp-relay.brevo.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=YOUR_BREVO_SMTP_LOGIN_HERE
SMTP_PASS=YOUR_BREVO_SMTP_PASSWORD_HERE

# Email Settings for Spam Prevention
EMAIL_FROM_ADDRESS=noreply@campuslearn-api.run.place
EMAIL_FROM_NAME=CampusLearn
EMAIL_REPLY_TO=support@campuslearn-api.run.place
EMAIL_RATE_LIMIT_PER_HOUR=100
EMAIL_RATE_LIMIT_PER_DAY=1000
DKIM_PRIVATE_KEY=YOUR_DKIM_PRIVATE_KEY_HERE_OPTIONAL

# Brevo API Configuration (for API-based sending if needed)
BREVO_API_KEY=YOUR_BREVO_API_KEY_HERE

# =============================================================================
# OPTIONAL - Advanced Settings
# =============================================================================

# GCS Signed URL TTL (seconds)
GCS_SIGNED_URL_TTL_SECONDS=3600

# CORS Origin Override (comma-separated, overrides CORS_ORIGINS)
# CORS_ORIGIN=http://localhost:3000,https://yourdomain.com

# =============================================================================
# REQUIRED - Security Configuration (NEW)
# =============================================================================

# Maximum file size for uploads (in bytes, default: 500MB)
MAX_FILE_SIZE=524288000

# Enable rate limiting (true/false, default: false in development)
ENABLE_RATE_LIMIT=false

# Upload rate limiting configuration - disabled for hosted environment
UPLOAD_RATE_LIMIT_WINDOW_MS=0
UPLOAD_RATE_LIMIT_MAX=0

# Logging level (error, warn, info, debug)
LOG_LEVEL=info

# Additional allowed origins for security (comma-separated)
ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# =============================================================================
# OPTIONAL - Video Call Configuration (Metered.ca)
# =============================================================================

# Metered.ca Video Call Settings
METERED_APP_NAME=your-metered-app-name
METERED_API_KEY=your-metered-api-key
METERED_TURN_USERNAME=your-turn-username
METERED_TURN_PASSWORD=your-turn-password
METERED_TURN_EXPIRY_SECONDS=3600
STUN_URLS=stun:stun.l.google.com:19302